import{r as a,j as e,H as je}from"./app-R8qb_GtJ.js";import{F as Ne,n as x}from"./index-D-dy2gg0.js";const te=3,F=30,ve=8,se=["Player 1","Player 2","Player 3"],ke=["bg-gradient-to-br from-cyan-400 to-cyan-500 text-slate-900","bg-gradient-to-br from-pink-400 to-rose-400 text-white","bg-gradient-to-br from-green-500 to-green-400 text-slate-900","bg-gradient-to-br from-amber-400 to-amber-300 text-slate-900","bg-gradient-to-br from-purple-600 to-purple-400 text-white","bg-gradient-to-br from-orange-500 to-orange-300 text-slate-900","bg-gradient-to-br from-cyan-500 to-teal-300 text-slate-900","bg-gradient-to-br from-indigo-600 to-indigo-400 text-white"];function Pe({categories:r={}}){const[v,T]=a.useState(se),[i,R]=a.useState(se),[k,H]=a.useState("offline"),[d,U]=a.useState([]),[h,b]=a.useState("players"),[p,B]=a.useState(0),[Y,ae]=a.useState(""),[C,z]=a.useState([]),[le,ne]=a.useState([]),[oe,u]=a.useState(!1),[re,g]=a.useState(!1),[f,S]=a.useState(!1),[P,y]=a.useState(!1),[V,M]=a.useState([]),[w,E]=a.useState(!1),[q,A]=a.useState(""),n=a.useMemo(()=>v.map(t=>t.trim()).filter(Boolean),[v]);a.useEffect(()=>{R(n)},[n]);const I=n.length,c=I>=10?3:I>=6?2:I>=3?1:0,[O,J]=a.useState(1);a.useEffect(()=>{O>c&&J(c||1)},[c]);const j=a.useMemo(()=>r.filter(t=>d.includes(t.name)).flatMap(t=>t.words??[]),[d,r]);a.useEffect(()=>{R(n)},[n]);const G=n.length>=te,L=j.length>=F,K=i[p],ie=ke[(le[p]||1)-1],X=t=>{const s=[...t];for(let l=s.length-1;l>0;l-=1){const o=Math.floor(Math.random()*(l+1));[s[l],s[o]]=[s[o],s[l]]}return s},de=()=>{T(t=>[...t,`Player ${v.length+1}`])},ce=(t,s)=>{T(l=>l.map((o,m)=>m===t?s:o))},me=t=>{T(s=>s.filter((l,o)=>o!==t)),z(s=>s.filter(l=>l!==t&&l<s.length-1))},xe=()=>{G&&b("categories")},he=()=>{b("players")},be=t=>{U(s=>s.includes(t)?s.filter(l=>l!==t):[...s,t])},Q=async t=>{try{await navigator.clipboard.writeText(t),x.success("Link copied!")}catch{window.prompt("Copy link",t),x("Copied link ready to paste.")}},$=q?`${window.location.origin}/games/${q}`:"",pe=`${window.location.origin}/`,_=async()=>{if(!L||w)return;if(M([]),A(""),k==="online"){E(!0);try{const m=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")??"",N=await fetch("/games",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":m,Accept:"application/json"},body:JSON.stringify({mode:"online",players:n,categories:d,imposters:O})});if(!N.ok){const we=await N.json().catch(()=>({}));throw new Error(we.message||"Unable to create online game.")}const ee=await N.json();M(ee.players||[]),A(ee.game?.slug||""),b("share"),x.success("Online game created. Share the links below.")}catch(m){x.error(m.message||"Something went wrong creating the online game.")}finally{E(!1)}return}if(!j.length){x.error("No words available for selected categories.");return}const t=[...i],s=X(j)[0],l=t.map(()=>Math.floor(Math.random()*ve)+1),o=X(t.map((m,N)=>N)).slice(0,O);R(t),ae(s),ne(l),z(o),B(0),u(!1),g(!1),S(!1),y(!1),b("game")},Z=t=>{t?.preventDefault(),u(!0)},D=t=>{t?.preventDefault(),u(!1),p===i.length-1?(S(!0),y(!1),g(!1)):g(!0)},ue=()=>{p<i.length-1?(B(t=>t+1),u(!1),g(!1)):(S(!0),y(!1))},ge=()=>{y(!0)},fe=()=>{x(()=>e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-semibold",children:"Secret word:"}),e.jsx("div",{className:"mb-2",children:Y}),e.jsxs("div",{className:"font-semibold",children:["Imposter",C.length>1?"s":"",":"]}),e.jsx("div",{children:C.map(t=>i[t]).join(", ")})]}),{duration:6e3})},W=()=>{b("categories"),u(!1),g(!1),S(!1),y(!1),M([]),E(!1),A("")},ye=()=>{_()};return e.jsxs(e.Fragment,{children:[e.jsx(je,{children:e.jsx("title",{children:"Pakistani Imposter Game - Online Party Game"})}),e.jsx(Ne,{position:"top-center"}),e.jsx("div",{className:"min-h-screen w-full bg-gradient-to-br from-slate-100 to-slate-200 flex flex-col items-center px-4 py-6",children:e.jsxs("div",{className:"relative w-full max-w-5xl bg-white rounded-3xl p-8 sm:p-10 shadow-2xl text-center",children:[h==="players"&&e.jsxs("div",{className:"border-b-4 border-pink-500 pb-6 mb-6 flex flex-col items-center gap-3",children:[e.jsx("div",{className:"text-6xl animate-pulse",children:e.jsx("img",{src:"/images/logo.png",alt:"Logo",className:"h-24 w-24 rounded-full"})}),e.jsx("div",{className:"text-cyan-300 tracking-[0.2em] font-semibold text-lg",children:"PAKISTANI IMPOSTER GAME"})]}),e.jsx("button",{className:"fixed top-4 right-4 z-50 bg-sky-500 text-white font-semibold px-4 py-2 rounded-xl shadow-lg shadow-sky-300/60 hover:bg-sky-600 transition",onClick:W,children:"New Game"}),h==="players"&&e.jsxs("section",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-semibold text-slate-800 mb-6",children:"Step 1: Players (min. 3)"}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-3 mb-4",children:[e.jsx("button",{className:`px-4 py-2 rounded-xl font-semibold shadow-sm border-2 transition ${k==="offline"?"bg-cyan-500 border-cyan-500 text-white shadow-cyan-200/60":"bg-white border-slate-200 text-slate-700 hover:border-cyan-400"}`,onClick:()=>H("offline"),children:"Offline (pass device)"}),e.jsx("button",{className:`px-4 py-2 rounded-xl font-semibold shadow-sm border-2 transition ${k==="online"?"bg-emerald-500 border-emerald-500 text-white shadow-emerald-200/60":"bg-white border-slate-200 text-slate-700 hover:border-emerald-400"}`,onClick:()=>H("online"),children:"Online (share links)"})]}),e.jsx("p",{className:"text-sm text-slate-600 mb-6",children:"Offline: everyone uses the same device. Online: generate one-time links per player (no account needed)."}),e.jsx("button",{className:"bg-pink-500 hover:bg-pink-600 text-white font-semibold px-4 py-2 rounded-xl shadow-md shadow-pink-300/50 transition",onClick:de,children:"+ Add Player"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mt-6",children:v.map((t,s)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",className:"flex-1 rounded-xl border-2 border-slate-200 bg-slate-50 px-4 py-3 text-base text-slate-800 focus:outline-none focus:border-pink-500 focus:bg-white transition",placeholder:`Player ${s+1}`,value:t,onChange:l=>ce(s,l.target.value)}),e.jsx("button",{className:"px-3 py-3 rounded-xl bg-slate-200 text-slate-700 font-bold hover:bg-slate-300",onClick:()=>me(s),children:"âœ•"})]},s))}),e.jsx("div",{className:"flex flex-wrap justify-center gap-3 my-6",children:n.map(t=>e.jsx("span",{className:"bg-cyan-300 text-slate-900 font-bold px-4 py-2 rounded-full shadow-md shadow-cyan-200/60",children:t},t))}),c>0&&e.jsxs("div",{className:"my-6",children:[e.jsx("p",{className:"text-sm font-semibold text-slate-700 mb-2",children:"Number of Imposters"}),e.jsx("div",{className:"flex justify-center gap-3",children:Array.from({length:c},(t,s)=>s+1).map(t=>e.jsx("button",{onClick:()=>J(t),className:`px-4 py-2 rounded-xl font-semibold border-2 transition ${O===t?"bg-rose-500 border-rose-500 text-white shadow-md shadow-rose-300/60":"bg-white border-slate-200 text-slate-700 hover:border-rose-400"}`,children:t},t))}),e.jsxs("p",{className:"text-xs text-slate-500 mt-2",children:["Allowed: 1 â€“ ",c," imposters for ",I," players"]})]}),e.jsx("button",{className:"mt-2 bg-pink-500 hover:bg-pink-600 text-white font-semibold px-6 py-3 rounded-xl shadow-md shadow-pink-300/60 transition disabled:opacity-50 disabled:cursor-not-allowed",onClick:xe,disabled:!G,children:G?"Next â†’ Categories":`Need ${te-n.length} more`})]}),h==="categories"&&e.jsxs("section",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-semibold text-slate-800 mb-4",children:"Step 2: Pick Categories"}),e.jsxs("p",{className:"text-base text-indigo-300 mb-2",children:[e.jsx("strong",{children:"Current Players:"})," ",e.jsx("span",{className:"text-cyan-300",children:i.join(", ")}),e.jsx("button",{className:"ml-4 px-3 py-2 text-sm rounded-lg bg-slate-200 text-slate-700 hover:bg-slate-300",onClick:he,children:"Change Players"})]}),e.jsxs("p",{className:"text-lg font-semibold text-slate-800 my-4",children:["Selected words:"," ",e.jsx("span",{className:"text-pink-500",children:j.length})," ","/ ",F,"+"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 my-6",children:[e.jsx("div",{className:"sm:col-span-2 flex justify-center",children:e.jsx("button",{className:`rounded-2xl w-full border-2 px-4 py-4 text-lg font-medium transition cursor-pointer shadow-sm ${d.length===r.length?"bg-pink-500 text-white border-pink-500 shadow-pink-300/60":"bg-slate-50 text-slate-800 border-slate-200 hover:-translate-y-1 hover:border-pink-500 hover:shadow-lg"}`,onClick:()=>{const t=d.length===r.length;U(t?[]:r.map(s=>s.name))},children:d.length===r.length?"Clear all categories":"Select all categories"})}),r.map(t=>{const s=d.includes(t.name),l=t.words?.length??0;return e.jsxs("div",{className:`rounded-2xl border-2 px-4 py-4 text-lg font-medium transition cursor-pointer shadow-sm ${s?"bg-pink-500 text-white border-pink-500 shadow-pink-300/60":"bg-slate-50 text-slate-800 border-slate-200 hover:-translate-y-1 hover:border-pink-500 hover:shadow-lg"}`,onClick:()=>be(t.name),children:[t.name," (",l,")"]},t.id)})]}),e.jsx("button",{className:`mt-2 bg-green-500 hover:bg-green-600 text-white font-semibold px-6 py-4 w-full text-xl rounded-xl shadow-md shadow-pink-300/60 transition
                       disabled:opacity-50 disabled:cursor-not-allowed`,onClick:_,disabled:!L||w,children:L?w?"Creating...":k==="online"?"Create online game":"Start Round!":`Need ${Math.max(0,F-j.length)} more words`})]}),h==="share"&&e.jsxs("section",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-semibold text-slate-800 mb-4",children:"Share links with players"}),e.jsx("p",{className:"text-slate-700 mb-4",children:"Choose one: share a single lobby link where everyone clicks their name, or send individual one-time links."}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-3 mb-4",children:[e.jsx("a",{href:pe,className:"rounded-xl bg-slate-100 px-4 py-2 text-slate-800 font-semibold border border-slate-200 hover:bg-slate-200",children:"Open host controls"}),e.jsx("button",{className:"rounded-xl bg-pink-500 px-4 py-2 text-white font-semibold shadow-md shadow-pink-200/70 hover:bg-pink-600",onClick:W,children:"Back to setup"})]}),$&&e.jsx("div",{className:"rounded-2xl border-2 border-blue-200 bg-blue-50 px-5 py-4 text-left shadow-sm mb-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold text-blue-700",children:"ðŸŽ® Single lobby link (recommended)"}),e.jsx("div",{className:"text-sm text-blue-800",children:"One link for all players. They click their name to reveal their card."})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[e.jsx("input",{className:"flex-1 rounded-xl border-2 border-blue-200 bg-white px-3 py-2 text-sm text-blue-900",value:$,readOnly:!0}),e.jsx("button",{className:"rounded-xl bg-blue-500 px-4 py-2 text-sm font-semibold text-white shadow-md shadow-blue-200/70 hover:bg-blue-600",onClick:()=>Q($),children:"Copy link"}),e.jsx("a",{className:"rounded-xl bg-white px-4 py-2 text-sm font-semibold text-blue-700 border border-blue-300 hover:bg-blue-100 text-center",href:$,target:"_blank",rel:"noreferrer",children:"Open lobby"})]})]})}),e.jsxs("details",{className:"text-left mb-6",children:[e.jsx("summary",{className:"cursor-pointer text-slate-700 font-semibold mb-2",children:"Or use individual links (one per player)"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-4",children:[V.length===0&&e.jsx("div",{className:"col-span-full text-slate-600",children:"No links generated yet."}),V.map(t=>e.jsxs("div",{className:"rounded-2xl border-2 border-slate-200 bg-white p-4 text-left shadow-sm",children:[e.jsx("div",{className:"text-lg font-semibold text-slate-800",children:t.name}),e.jsxs("div",{className:"mt-2 flex flex-col sm:flex-row gap-2",children:[e.jsx("input",{className:"flex-1 rounded-xl border-2 border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-700",value:t.url,readOnly:!0}),e.jsx("button",{className:"whitespace-nowrap rounded-xl bg-emerald-500 px-4 py-2 text-sm font-semibold text-white shadow-md shadow-emerald-200/70 hover:bg-emerald-600",onClick:()=>Q(t.url),children:"Copy link"})]})]},t.url))]})]}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-3 mt-8",children:[e.jsx("button",{className:"rounded-xl bg-emerald-500 px-6 py-3 text-white font-semibold shadow-md shadow-emerald-200/70 hover:bg-emerald-600 disabled:opacity-50",onClick:_,disabled:w,children:w?"Creating...":"Create another online round"}),e.jsx("button",{className:"rounded-xl bg-slate-200 px-6 py-3 text-slate-800 font-semibold hover:bg-slate-300",onClick:W,children:"Back to categories"})]})]}),h==="game"&&e.jsxs("section",{className:"text-center",children:[e.jsx("h2",{className:`text-xl sm:text-2xl font-semibold text-slate-800 mb-4 ${f?"visible":"invisible"}`,children:f&&e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:i.find((t,s)=>!C.includes(s))})," ","â€” start the discussion!"]})}),e.jsx("div",{className:"text-lg font-medium text-slate-700 mb-4",children:"Touch & hold card to see your secret"}),e.jsx("div",{className:`relative w-80 h-[480px] mx-auto my-12 [perspective:1100px] select-none touch-none ${P?"hidden":""}`,onMouseDown:Z,onTouchStart:Z,onMouseUp:D,onMouseLeave:D,onTouchEnd:D,onContextMenu:t=>t.preventDefault(),children:e.jsxs("div",{className:`relative w-full h-full rounded-3xl shadow-2xl transition-transform duration-[900ms] ease-[cubic-bezier(0.68,-0.55,0.265,1.55)] [transform-style:preserve-3d] ${oe?"[transform:rotateY(180deg)]":""}`,children:[e.jsx("div",{className:"absolute inset-0 rounded-3xl flex items-center justify-center px-6 text-2xl font-bold text-center text-slate-100 bg-gradient-to-br from-slate-800 to-slate-700 [backface-visibility:hidden]",children:K}),e.jsx("div",{className:`absolute inset-0 rounded-3xl flex items-center justify-center px-6 text-2xl font-bold text-center whitespace-pre-line [transform:rotateY(180deg)] [backface-visibility:hidden] ${ie}`,children:C.includes(p)?`YOU ARE
THE IMPOSTER!`:Y})]})}),e.jsx("div",{className:"text-lg font-medium text-slate-700 mb-4",children:f?"Everyone has seen their card!":`Pass device to ${K}`}),e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("button",{className:`bg-cyan-300 text-slate-900 font-semibold px-6 py-3 rounded-xl shadow-md shadow-cyan-200/60 transition ${re&&!f?"block":"hidden"}`,onClick:ue,children:"Next Player"}),e.jsx("button",{className:`bg-green-500 text-white font-semibold px-6 py-3 rounded-xl shadow-md shadow-green-300/60 transition ${f&&!P?"block":"hidden"}`,onClick:ge,children:"Start Game!"}),e.jsx("button",{className:`bg-rose-500 text-white font-semibold px-6 py-3 rounded-xl shadow-md shadow-rose-300/60 transition ${P?"block":"hidden"}`,onClick:fe,children:"Reveal Word + Imposter"}),e.jsx("button",{className:`bg-pink-500 text-white font-semibold px-6 py-3 rounded-xl shadow-md shadow-pink-300/60 transition ${P?"block":"hidden"}`,onClick:ye,children:"New Round (same players & categories)"})]})]}),e.jsxs("footer",{className:"mt-10 pt-8 border-t-2 border-slate-200 text-left text-slate-600 text-base leading-relaxed",children:[e.jsx("h3",{className:"text-2xl font-semibold text-slate-800 mb-3",children:"About Pakistani Imposter Game"}),e.jsxs("p",{children:["Welcome to the"," ",e.jsx("strong",{children:"Pakistani Imposter Game"}),", an engaging multiplayer party game that brings Pakistani culture and traditions to life."]}),e.jsxs("p",{children:["The game features"," ",e.jsx("strong",{children:"12 diverse categories"})," including Pakistani foods, kitchen utensils, everyday objects, occupations, animals, sports, transportation, music, hobbies, school items, brands, and video games."]}),e.jsx("p",{children:"Perfect for family gatherings, parties, and social events, the Pakistani Imposter Game promotes cultural awareness, strategic thinking, and fun-filled entertainment."}),e.jsx("p",{children:"Whether you are celebrating a family dawat or hosting a mehndi party, this game delivers engaging entertainment that celebrates Pakistani culture and traditions."})]})]})})]})}export{Pe as default};
