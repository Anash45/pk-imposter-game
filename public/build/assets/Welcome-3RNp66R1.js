import{r as a,j as e,H as ue}from"./app-DO5pDGxG.js";import{F as ge,n as g}from"./index-lpUd8fhw.js";const J=3,D=30,fe=8,V=["Player 1","Player 2","Player 3"],ye=["bg-gradient-to-br from-cyan-400 to-cyan-500 text-slate-900","bg-gradient-to-br from-pink-400 to-rose-400 text-white","bg-gradient-to-br from-green-500 to-green-400 text-slate-900","bg-gradient-to-br from-amber-400 to-amber-300 text-slate-900","bg-gradient-to-br from-purple-600 to-purple-400 text-white","bg-gradient-to-br from-orange-500 to-orange-300 text-slate-900","bg-gradient-to-br from-cyan-500 to-teal-300 text-slate-900","bg-gradient-to-br from-indigo-600 to-indigo-400 text-white"];function ve({categories:f={}}){const[P,I]=a.useState(V),[r,_]=a.useState(V),[y,W]=a.useState("offline"),[w,K]=a.useState([]),[i,d]=a.useState("players"),[c,F]=a.useState(0),[H,X]=a.useState(""),[O,Q]=a.useState(-1),[Z,ee]=a.useState([]),[te,m]=a.useState(!1),[se,x]=a.useState(!1),[h,j]=a.useState(!1),[v,b]=a.useState(!1),[U,T]=a.useState([]),[p,M]=a.useState(!1),[N,R]=a.useState(""),o=a.useMemo(()=>P.map(t=>t.trim()).filter(Boolean),[P]),k=a.useMemo(()=>w.flatMap(t=>f[t]||[]),[w,f]);a.useEffect(()=>{_(o)},[o]);const $=o.length>=J,E=k.length>=D,Y=r[c],ae=ye[(Z[c]||1)-1],le=t=>{const s=[...t];for(let l=s.length-1;l>0;l-=1){const n=Math.floor(Math.random()*(l+1));[s[l],s[n]]=[s[n],s[l]]}return s},ne=()=>{I(t=>[...t,""])},re=(t,s)=>{I(l=>l.map((n,u)=>u===t?s:n))},oe=t=>{I(s=>s.filter((l,n)=>n!==t))},ie=()=>{$&&d("categories")},de=()=>{d("players")},ce=t=>{K(s=>s.includes(t)?s.filter(l=>l!==t):[...s,t])},G=async t=>{try{await navigator.clipboard.writeText(t),g.success("Link copied!")}catch{window.prompt("Copy link",t),g("Copied link ready to paste.")}},C=N?`https://meet.jit.si/pk-imposter-${N}`:"",S=N?`${window.location.origin}/games/${N}`:"",A=async()=>{if(!E||p)return;if(T([]),R(""),y==="online"){M(!0);try{const n=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")??"",u=await fetch("/games",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":n,Accept:"application/json"},body:JSON.stringify({mode:"online",players:o,categories:w})});if(!u.ok){const pe=await u.json().catch(()=>({}));throw new Error(pe.message||"Unable to create online game.")}const z=await u.json();T(z.players||[]),R(z.game?.slug||""),d("share"),g.success("Online game created. Share the links below.")}catch(n){g.error(n.message||"Something went wrong creating the online game.")}finally{M(!1)}return}const t=[...r],s=le(k)[0],l=t.map(()=>Math.floor(Math.random()*fe)+1);_(t),X(s),ee(l),Q(Math.floor(Math.random()*t.length)),F(0),m(!1),x(!1),j(!1),b(!1),d("game")},B=t=>{t?.preventDefault(),m(!0)},L=t=>{t?.preventDefault(),m(!1),c===r.length-1?(j(!0),b(!1),x(!1)):x(!0)},me=()=>{c<r.length-1?(F(t=>t+1),m(!1),x(!1)):(j(!0),b(!1))},xe=()=>{b(!0)},he=()=>{g(()=>e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-semibold",children:"Secret word:"}),e.jsx("div",{className:"mb-2",children:H}),e.jsx("div",{className:"font-semibold",children:"Imposter:"}),e.jsx("div",{children:r[O]})]}),{duration:6e3})},q=()=>{d("categories"),m(!1),x(!1),j(!1),b(!1),T([]),M(!1),R("")},be=()=>{A()};return e.jsxs(e.Fragment,{children:[e.jsx(ue,{children:e.jsx("title",{children:"Pakistani Imposter Game - Online Party Game"})}),e.jsx(ge,{position:"top-center"}),e.jsx("div",{className:"min-h-screen w-full bg-gradient-to-br from-slate-100 to-slate-200 flex flex-col items-center px-4 py-6",children:e.jsxs("div",{className:"relative w-full max-w-5xl bg-white rounded-3xl p-8 sm:p-10 shadow-2xl text-center",children:[i==="players"&&e.jsxs("div",{className:"border-b-4 border-pink-500 pb-6 mb-6 flex flex-col items-center gap-3",children:[e.jsx("div",{className:"text-6xl animate-pulse",children:e.jsx("img",{src:"/images/logo.png",alt:"Logo",className:"h-24 w-24 rounded-full"})}),e.jsx("div",{className:"text-cyan-300 tracking-[0.2em] font-semibold text-lg",children:"PAKISTANI IMPOSTER GAME"})]}),e.jsx("button",{className:"fixed top-4 right-4 z-50 bg-sky-500 text-white font-semibold px-4 py-2 rounded-xl shadow-lg shadow-sky-300/60 hover:bg-sky-600 transition",onClick:q,children:"New Game"}),i==="players"&&e.jsxs("section",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-semibold text-slate-800 mb-6",children:"Step 1: Players (min. 3)"}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-3 mb-4",children:[e.jsx("button",{className:`px-4 py-2 rounded-xl font-semibold shadow-sm border-2 transition ${y==="offline"?"bg-cyan-500 border-cyan-500 text-white shadow-cyan-200/60":"bg-white border-slate-200 text-slate-700 hover:border-cyan-400"}`,onClick:()=>W("offline"),children:"Offline (pass device)"}),e.jsx("button",{className:`px-4 py-2 rounded-xl font-semibold shadow-sm border-2 transition ${y==="online"?"bg-emerald-500 border-emerald-500 text-white shadow-emerald-200/60":"bg-white border-slate-200 text-slate-700 hover:border-emerald-400"}`,onClick:()=>W("online"),children:"Online (share links)"})]}),e.jsx("p",{className:"text-sm text-slate-600 mb-6",children:"Offline: everyone uses the same device. Online: generate one-time links per player (no account needed)."}),e.jsx("button",{className:"bg-pink-500 hover:bg-pink-600 text-white font-semibold px-4 py-2 rounded-xl shadow-md shadow-pink-300/50 transition",onClick:ne,children:"+ Add Player"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mt-6",children:P.map((t,s)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",className:"flex-1 rounded-xl border-2 border-slate-200 bg-slate-50 px-4 py-3 text-base text-slate-800 focus:outline-none focus:border-pink-500 focus:bg-white transition",placeholder:`Player ${s+1}`,value:t,onChange:l=>re(s,l.target.value)}),e.jsx("button",{className:"px-3 py-3 rounded-xl bg-slate-200 text-slate-700 font-bold hover:bg-slate-300",onClick:()=>oe(s),children:"âœ•"})]},s))}),e.jsx("div",{className:"flex flex-wrap justify-center gap-3 my-6",children:o.map(t=>e.jsx("span",{className:"bg-cyan-300 text-slate-900 font-bold px-4 py-2 rounded-full shadow-md shadow-cyan-200/60",children:t},t))}),e.jsx("button",{className:"mt-2 bg-pink-500 hover:bg-pink-600 text-white font-semibold px-6 py-3 rounded-xl shadow-md shadow-pink-300/60 transition disabled:opacity-50 disabled:cursor-not-allowed",onClick:ie,disabled:!$,children:$?"Next â†’ Categories":`Need ${J-o.length} more`})]}),i==="categories"&&e.jsxs("section",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-semibold text-slate-800 mb-4",children:"Step 2: Pick Categories"}),e.jsxs("p",{className:"text-base text-indigo-300 mb-2",children:[e.jsx("strong",{children:"Current Players:"})," ",e.jsx("span",{className:"text-cyan-300",children:r.join(", ")}),e.jsx("button",{className:"ml-4 px-3 py-2 text-sm rounded-lg bg-slate-200 text-slate-700 hover:bg-slate-300",onClick:de,children:"Change Players"})]}),e.jsxs("p",{className:"text-lg font-semibold text-slate-800 my-4",children:["Selected words: ",e.jsx("span",{className:"text-pink-500",children:k.length})," / ",D,"+"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 my-6",children:Object.keys(f).map(t=>{const s=w.includes(t),l=f[t]?.length??0;return e.jsxs("div",{className:`rounded-2xl border-2 px-4 py-4 text-lg font-medium transition cursor-pointer shadow-sm ${s?"bg-pink-500 text-white border-pink-500 shadow-pink-300/60":"bg-slate-50 text-slate-800 border-slate-200 hover:-translate-y-1 hover:border-pink-500 hover:shadow-lg"}`,onClick:()=>ce(t),children:[t," (",l,")"]},t)})}),e.jsx("button",{className:"mt-2 bg-pink-500 hover:bg-pink-600 text-white font-semibold px-6 py-3 rounded-xl shadow-md shadow-pink-300/60 transition disabled:opacity-50 disabled:cursor-not-allowed",onClick:A,disabled:!E||p,children:E?p?"Creating...":y==="online"?"Create online game":"Start Round!":`Need ${D-k.length} more words`})]}),i==="share"&&e.jsxs("section",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-semibold text-slate-800 mb-4",children:"Share links with players"}),e.jsx("p",{className:"text-slate-700 mb-4",children:"Choose one: share a single lobby link where everyone clicks their name, or send individual one-time links."}),S&&e.jsx("div",{className:"rounded-2xl border-2 border-blue-200 bg-blue-50 px-5 py-4 text-left shadow-sm mb-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold text-blue-700",children:"ðŸŽ® Single lobby link (recommended)"}),e.jsx("div",{className:"text-sm text-blue-800",children:"One link for all players. They click their name to reveal their card."})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[e.jsx("input",{className:"flex-1 rounded-xl border-2 border-blue-200 bg-white px-3 py-2 text-sm text-blue-900",value:S,readOnly:!0}),e.jsx("button",{className:"rounded-xl bg-blue-500 px-4 py-2 text-sm font-semibold text-white shadow-md shadow-blue-200/70 hover:bg-blue-600",onClick:()=>G(S),children:"Copy link"}),e.jsx("a",{className:"rounded-xl bg-white px-4 py-2 text-sm font-semibold text-blue-700 border border-blue-300 hover:bg-blue-100 text-center",href:S,target:"_blank",rel:"noreferrer",children:"Open lobby"})]})]})}),C&&e.jsx("div",{className:"rounded-2xl border-2 border-emerald-200 bg-emerald-50 px-5 py-4 text-left shadow-sm mb-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold text-emerald-700",children:"Group voice room (free)"}),e.jsx("div",{className:"text-sm text-emerald-800",children:"Powered by Jitsi; no account required, only host should login."})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[e.jsx("input",{className:"flex-1 rounded-xl border-2 border-emerald-200 bg-white px-3 py-2 text-sm text-emerald-900",value:C,readOnly:!0}),e.jsx("button",{className:"rounded-xl bg-emerald-500 px-4 py-2 text-sm font-semibold text-white shadow-md shadow-emerald-200/70 hover:bg-emerald-600",onClick:()=>G(C),children:"Copy link"}),e.jsx("a",{className:"rounded-xl bg-white px-4 py-2 text-sm font-semibold text-emerald-700 border border-emerald-300 hover:bg-emerald-100 text-center",href:C,target:"_blank",rel:"noreferrer",children:"Open voice room"})]})]})}),e.jsxs("details",{className:"text-left mb-6",children:[e.jsx("summary",{className:"cursor-pointer text-slate-700 font-semibold mb-2",children:"Or use individual links (one per player)"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-4",children:[U.length===0&&e.jsx("div",{className:"col-span-full text-slate-600",children:"No links generated yet."}),U.map(t=>e.jsxs("div",{className:"rounded-2xl border-2 border-slate-200 bg-white p-4 text-left shadow-sm",children:[e.jsx("div",{className:"text-lg font-semibold text-slate-800",children:t.name}),e.jsxs("div",{className:"mt-2 flex flex-col sm:flex-row gap-2",children:[e.jsx("input",{className:"flex-1 rounded-xl border-2 border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-700",value:t.url,readOnly:!0}),e.jsx("button",{className:"whitespace-nowrap rounded-xl bg-emerald-500 px-4 py-2 text-sm font-semibold text-white shadow-md shadow-emerald-200/70 hover:bg-emerald-600",onClick:()=>G(t.url),children:"Copy link"})]})]},t.url))]})]}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-3 mt-8",children:[e.jsx("button",{className:"rounded-xl bg-emerald-500 px-6 py-3 text-white font-semibold shadow-md shadow-emerald-200/70 hover:bg-emerald-600 disabled:opacity-50",onClick:A,disabled:p,children:p?"Creating...":"Create another online round"}),e.jsx("button",{className:"rounded-xl bg-slate-200 px-6 py-3 text-slate-800 font-semibold hover:bg-slate-300",onClick:q,children:"Back to categories"})]})]}),i==="game"&&e.jsxs("section",{className:"text-center",children:[e.jsx("h2",{className:`text-xl sm:text-2xl font-semibold text-slate-800 mb-4 ${h?"visible":"invisible"}`,children:h&&e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:r.find((t,s)=>s!==O)})," â€” start the discussion!"]})}),e.jsx("div",{className:"text-lg font-medium text-slate-700 mb-4",children:"Touch & hold card to see your secret"}),e.jsx("div",{className:`relative w-80 h-[480px] mx-auto my-12 [perspective:1100px] select-none touch-none ${v?"hidden":""}`,onMouseDown:B,onTouchStart:B,onMouseUp:L,onMouseLeave:L,onTouchEnd:L,onContextMenu:t=>t.preventDefault(),children:e.jsxs("div",{className:`relative w-full h-full rounded-3xl shadow-2xl transition-transform duration-[900ms] ease-[cubic-bezier(0.68,-0.55,0.265,1.55)] [transform-style:preserve-3d] ${te?"[transform:rotateY(180deg)]":""}`,children:[e.jsx("div",{className:"absolute inset-0 rounded-3xl flex items-center justify-center px-6 text-2xl font-bold text-center text-slate-100 bg-gradient-to-br from-slate-800 to-slate-700 [backface-visibility:hidden]",children:Y}),e.jsx("div",{className:`absolute inset-0 rounded-3xl flex items-center justify-center px-6 text-2xl font-bold text-center whitespace-pre-line [transform:rotateY(180deg)] [backface-visibility:hidden] ${ae}`,children:c===O?`YOU ARE
THE IMPOSTER!`:H})]})}),e.jsx("div",{className:"text-lg font-medium text-slate-700 mb-4",children:h?"Everyone has seen their card!":`Pass device to ${Y}`}),e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("button",{className:`bg-cyan-300 text-slate-900 font-semibold px-6 py-3 rounded-xl shadow-md shadow-cyan-200/60 transition ${se&&!h?"block":"hidden"}`,onClick:me,children:"Next Player"}),e.jsx("button",{className:`bg-green-500 text-white font-semibold px-6 py-3 rounded-xl shadow-md shadow-green-300/60 transition ${h&&!v?"block":"hidden"}`,onClick:xe,children:"Start Game!"}),e.jsx("button",{className:`bg-rose-500 text-white font-semibold px-6 py-3 rounded-xl shadow-md shadow-rose-300/60 transition ${v?"block":"hidden"}`,onClick:he,children:"Reveal Word + Imposter"}),e.jsx("button",{className:`bg-pink-500 text-white font-semibold px-6 py-3 rounded-xl shadow-md shadow-pink-300/60 transition ${v?"block":"hidden"}`,onClick:be,children:"New Round (same players & categories)"})]})]}),e.jsxs("footer",{className:"mt-10 pt-8 border-t-2 border-slate-200 text-left text-slate-600 text-base leading-relaxed",children:[e.jsx("h3",{className:"text-2xl font-semibold text-slate-800 mb-3",children:"About Pakistani Imposter Game"}),e.jsxs("p",{children:["Welcome to the ",e.jsx("strong",{children:"Pakistani Imposter Game"}),", an engaging multiplayer party game that brings Pakistani culture and traditions to life."]}),e.jsxs("p",{children:["The game features ",e.jsx("strong",{children:"12 diverse categories"})," including Pakistani foods, kitchen utensils, everyday objects, occupations, animals, sports, transportation, music, hobbies, school items, brands, and video games."]}),e.jsx("p",{children:"Perfect for family gatherings, parties, and social events, the Pakistani Imposter Game promotes cultural awareness, strategic thinking, and fun-filled entertainment."}),e.jsx("p",{children:"Whether you are celebrating a family dawat or hosting a mehndi party, this game delivers engaging entertainment that celebrates Pakistani culture and traditions."})]})]})})]})}export{ve as default};
